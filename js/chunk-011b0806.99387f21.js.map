{"version":3,"sources":["webpack:///./src/page/playlist-detail/index.vue?7a12","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/_string-context.js","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/es6.string.includes.js","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/_fails-is-regexp.js","webpack:///./src/page/playlist-detail/index.vue?dcee","webpack:///./src/page/playlist-detail/header.vue?b779","webpack:///src/page/playlist-detail/header.vue","webpack:///./src/page/playlist-detail/header.vue?5094","webpack:///./src/page/playlist-detail/header.vue","webpack:///src/page/playlist-detail/index.vue","webpack:///./src/page/playlist-detail/index.vue?0420","webpack:///./src/page/playlist-detail/index.vue","webpack:///./src/page/playlist-detail/header.vue?b0f2","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/es7.array.includes.js"],"names":["isRegExp","defined","module","exports","that","searchString","NAME","TypeError","String","$export","context","INCLUDES","P","F","includes","this","indexOf","arguments","length","undefined","MATCH","KEY","re","e","f","render","_vm","_h","$createElement","_c","_self","playlist","staticClass","ref","attrs","songs","tabs","model","value","callback","$$v","activeTab","expression","directives","name","rawName","SONG_IDX","class","getInputCls","on","onInputBlur","onInputFocus","searchValue","filteredSongs","_v","_s","_e","COMMENT_IDX","id","onCommentsUpdate","staticRenderFns","$utils","genImgUrl","coverImgUrl","creator","avatarUrl","nickname","formatDate","createTime","playAll","tagsText","description","props","type","Object","default","Array","methods","startSong","setPlaylist","computed","tags","join","component","metaInfo","title","data","inputFocus","splice","scrollToHeader","header","Number","$route","params","filter","watch","handler","init","immediate","components","$includes","el"],"mappings":"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","file":"js/chunk-011b0806.99387f21.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2731553c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2731553c&lang=scss&scoped=true&\"","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.playlist.id)?_c('div',{staticClass:\"playlist-detail\"},[_c('DetailHeader',{ref:\"header\",attrs:{\"playlist\":_vm.playlist,\"songs\":_vm.songs}}),_c('div',{staticClass:\"tabs-wrap\"},[_c('Tabs',{attrs:{\"tabs\":_vm.tabs,\"type\":\"theme\"},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}}),_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === _vm.SONG_IDX),expression:\"activeTab === SONG_IDX\"}],staticClass:\"input\",class:_vm.getInputCls(),attrs:{\"placeholder\":\"搜索歌单音乐\",\"prefix-icon\":\"el-icon-search\"},on:{\"blur\":_vm.onInputBlur,\"focus\":_vm.onInputFocus},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}})],1),(_vm.searchValue && !_vm.filteredSongs.length)?_c('div',{staticClass:\"empty\"},[_vm._v(\"\\n    未能找到和\\n    \"),_c('span',{staticClass:\"keyword\"},[_vm._v(\"“\"+_vm._s(_vm.searchValue)+\"”\")]),_vm._v(\"\\n    相关的任何音乐\\n  \")]):_vm._e(),_c('SongTable',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === _vm.SONG_IDX),expression:\"activeTab === SONG_IDX\"}],staticClass:\"table\",attrs:{\"highlightText\":_vm.searchValue,\"songs\":_vm.filteredSongs}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === _vm.COMMENT_IDX),expression:\"activeTab === COMMENT_IDX\"}],staticClass:\"comments\"},[_c('Comments',{attrs:{\"id\":_vm.id,\"type\":\"playlist\"},on:{\"update\":_vm.onCommentsUpdate}})],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.playlist.id)?_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"img-wrap\"},[_c('img',{attrs:{\"src\":_vm.$utils.genImgUrl(_vm.playlist.coverImgUrl, 400)}})]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title-wrap\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.playlist.name))])]),_c('div',{staticClass:\"creator-wrap\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.playlist.creator.avatarUrl}}),_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(_vm.playlist.creator.nickname))]),_c('p',{staticClass:\"create-time\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$utils.formatDate(_vm.playlist.createTime, \"yyyy-MM-dd\"))+\" 创建\\n      \")])]),_c('div',{staticClass:\"action-wrap\"},[_c('NButton',{staticClass:\"button\",on:{\"click\":_vm.playAll}},[_c('Icon',{staticClass:\"icon middle\",attrs:{\"color\":\"white\",\"type\":\"play-round\"}}),_c('span',{staticClass:\"middle\"},[_vm._v(\"播放全部\")])],1)],1),_c('div',{staticClass:\"desc-wrap\"},[(_vm.tagsText)?_c('p',{staticClass:\"desc\"},[_c('span',[_vm._v(\"标签：\"+_vm._s(_vm.tagsText))])]):_vm._e(),(_vm.playlist.description)?_c('p',{staticClass:\"desc\"},[_c('span',{staticClass:\"value\"},[_vm._v(\"简介：\"+_vm._s(_vm.playlist.description))])]):_vm._e()])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"header\" v-if=\"playlist.id\">\n    <div class=\"img-wrap\">\n      <img :src=\"$utils.genImgUrl(playlist.coverImgUrl, 400)\" />\n    </div>\n    <div class=\"content\">\n      <div class=\"title-wrap\">\n        <p class=\"title\">{{ playlist.name }}</p>\n      </div>\n      <div class=\"creator-wrap\">\n        <img :src=\"playlist.creator.avatarUrl\" class=\"avatar\" />\n        <p class=\"creator\">{{ playlist.creator.nickname }}</p>\n        <p class=\"create-time\">\n          {{ $utils.formatDate(playlist.createTime, \"yyyy-MM-dd\") }} 创建\n        </p>\n      </div>\n      <div class=\"action-wrap\">\n        <NButton @click=\"playAll\" class=\"button\">\n          <Icon class=\"icon middle\" color=\"white\" type=\"play-round\" />\n          <span class=\"middle\">播放全部</span>\n        </NButton>\n      </div>\n      <div class=\"desc-wrap\">\n        <p class=\"desc\" v-if=\"tagsText\">\n          <span>标签：{{ tagsText }}</span>\n        </p>\n        <p class=\"desc\" v-if=\"playlist.description\">\n          <span class=\"value\">简介：{{ playlist.description }}</span>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapMutations } from \"@/store/helper/music\"\nexport default {\n  props: {\n    playlist: {\n      type: Object,\n      default: () => ({}),\n    },\n    songs: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  methods: {\n    playAll() {\n      this.startSong(this.songs[0])\n      this.setPlaylist(this.songs)\n    },\n    ...mapMutations([\"setPlaylist\"]),\n    ...mapActions([\"startSong\"]),\n  },\n  computed: {\n    tagsText() {\n      return this.playlist.tags.join(\"/\")\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.header {\n  display: flex;\n  padding: 36px;\n\n  .img-wrap {\n    width: 200px;\n    height: 200px;\n    margin-right: 24px;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  .content {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    flex: 1;\n\n    .title-wrap {\n      display: flex;\n      align-items: center;\n      margin-bottom: 12px;\n\n      .title {\n        font-size: $font-size-lg;\n        color: var(--font-color-white);\n      }\n    }\n\n    .action-wrap {\n      margin-bottom: 18px;\n\n      .button {\n        background: #f95043;\n        background: linear-gradient(to right, #fa5143, #f44d41, #d53b32);\n        color: #fbdfdd;\n        border: none;\n\n        .icon {\n          margin-right: 4px;\n        }\n\n        .middle {\n          vertical-align: middle;\n        }\n      }\n    }\n\n    .creator-wrap {\n      display: flex;\n      align-items: center;\n      margin-bottom: 18px;\n\n      .avatar {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        margin-right: 8px;\n      }\n\n      .creator {\n        margin-right: 8px;\n      }\n\n      .create-time {\n        font-size: $font-size-sm;\n      }\n    }\n\n    .desc {\n      margin-bottom: 8px;\n\n      .label {\n        display: inline-block;\n        margin-right: 8px;\n      }\n\n      .value {\n        @include text-ellipsis-multi(3);\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./header.vue?vue&type=template&id=1ef23c8a&scoped=true&\"\nimport script from \"./header.vue?vue&type=script&lang=js&\"\nexport * from \"./header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./header.vue?vue&type=style&index=0&id=1ef23c8a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ef23c8a\",\n  null\n  \n)\n\nexport default component.exports","// 歌单详情页面\n<template>\n  <div class=\"playlist-detail\" v-if=\"playlist.id\">\n    <DetailHeader ref=\"header\" :playlist=\"playlist\" :songs=\"songs\" />\n    <div class=\"tabs-wrap\">\n      <Tabs :tabs=\"tabs\" type=\"theme\" v-model=\"activeTab\" />\n      <el-input\n        :class=\"getInputCls()\"\n        @blur=\"onInputBlur\"\n        @focus=\"onInputFocus\"\n        class=\"input\"\n        placeholder=\"搜索歌单音乐\"\n        prefix-icon=\"el-icon-search\"\n        v-model=\"searchValue\"\n        v-show=\"activeTab === SONG_IDX\"\n      ></el-input>\n    </div>\n    <div class=\"empty\" v-if=\"searchValue && !filteredSongs.length\">\n      未能找到和\n      <span class=\"keyword\">“{{ searchValue }}”</span>\n      相关的任何音乐\n    </div>\n    <SongTable\n      :highlightText=\"searchValue\"\n      :songs=\"filteredSongs\"\n      class=\"table\"\n      v-show=\"activeTab === SONG_IDX\"\n    />\n    <div class=\"comments\" v-show=\"activeTab === COMMENT_IDX\">\n      <Comments :id=\"id\" @update=\"onCommentsUpdate\" type=\"playlist\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport DetailHeader from \"./header\"\nimport SongTable from \"@/components/song-table\"\nimport Comments from \"@/components/comments\"\nimport { createSong, scrollInto } from \"@/utils\"\nimport { getListDetail } from \"@/api\"\nimport { getSongDetail } from \"@/api\"\n\nconst MAX = 500\nconst SONG_IDX = 0\nconst COMMENT_IDX = 1\nexport default {\n  metaInfo() {\n    return {\n      title: this.playlist.name,\n    }\n  },\n  async created() {\n    this.SONG_IDX = SONG_IDX\n    this.COMMENT_IDX = COMMENT_IDX\n  },\n  data() {\n    return {\n      tabs: [\"歌曲列表\", \"评论\"],\n      activeTab: SONG_IDX,\n      playlist: {},\n      songs: [],\n      searchValue: \"\",\n      inputFocus: false,\n    }\n  },\n  methods: {\n    async init() {\n      const { playlist } = await getListDetail({ id: this.id })\n      this.playlist = playlist\n      this.genSonglist(playlist)\n    },\n    async genSonglist(playlist) {\n      const trackIds = playlist.trackIds.map(({ id }) => id)\n      const songDetails = await getSongDetail(trackIds.slice(0, MAX))\n      const songs = songDetails.songs.map(({ id, name, al, ar, mv, dt }) =>\n        createSong({\n          id,\n          name,\n          artists: ar,\n          duration: dt,\n          mvId: mv,\n          albumName: al.name,\n          img: al.picUrl,\n        }),\n      )\n      this.songs = songs\n    },\n    onCommentsUpdate({ total }) {\n      this.tabs.splice(COMMENT_IDX, 1, `评论(${total})`)\n    },\n    onInputFocus() {\n      this.inputFocus = true\n    },\n    onInputBlur() {\n      this.inputFocus = false\n    },\n    getInputCls() {\n      return !this.inputFocus ? \"inactive\" : \"\"\n    },\n    scrollToHeader() {\n      const { header } = this.$refs\n      if (header) {\n        scrollInto(header.$el)\n      }\n    },\n  },\n  computed: {\n    id() {\n      return Number(this.$route.params.id)\n    },\n    filteredSongs() {\n      return this.songs.filter(({ name, artistsText, albumName }) =>\n        `${name}${artistsText}${albumName}`\n          .toLowerCase()\n          .includes(this.searchValue.toLowerCase()),\n      )\n    },\n  },\n  watch: {\n    id: {\n      handler() {\n        this.searchValue = \"\"\n        this.init()\n        this.scrollToHeader()\n      },\n      immediate: true,\n    },\n  },\n  components: { DetailHeader, SongTable, Comments },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.playlist-detail {\n  width: 100%;\n\n  .tabs-wrap {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 0 24px;\n    border-bottom: 1px solid var(--border);\n\n    .input {\n      width: 125px;\n\n      &:not(:hover) {\n        &.inactive {\n          /deep/.el-input__inner {\n            background: transparent !important;\n          }\n        }\n      }\n    }\n  }\n\n  .empty {\n    @include flex-center;\n    height: 200px;\n\n    .keyword {\n      color: $blue;\n    }\n  }\n\n  .comments {\n    padding: 16px 32px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2731553c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2731553c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2731553c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=style&index=0&id=1ef23c8a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=style&index=0&id=1ef23c8a&lang=scss&scoped=true&\"","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n"],"sourceRoot":""}